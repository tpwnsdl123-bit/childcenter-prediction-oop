{% extends "base.html" %}
{% block body_class %}hero-page{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='predict.css') }}">
{% endblock %}

{% block content %}

<section class="hero-section hero-predict">
    <div class="hero-overlay"></div>
    <div class="container hero-inner">
        <h1 class="hero-title">머신러닝</h1>
    </div>
</section>

<div class="container mt-3 mb-4">
    <div class="row gx-3 align-items-start">

        <!-- 왼쪽: 연도/자치구 + 지도 -->
        <div class="col-12 col-md-5 mb-4 mb-md-0">
            <div class="predict-left">

                <!-- 필터 영역 -->
                <div class="filter-area mb-2">
                    <select id="year-select" class="filter-select">
                        {% for y in range(2023, 2031) %}
                        <option value="{{ y }}" {% if y == 2024 %}selected{% endif %}>{{ y }}</option>
                        {% endfor %}
                    </select>

                    <select id="gu-select" class="filter-select">
                        <option value="전체" selected>자치구 전체</option>
                    </select>

                    <button type="button" id="filter-submit" class="filter-submit">
                        조회하기
                    </button>
                </div>

                <!-- 지도 -->
                <div class="map-card">
                    <div class="map-inner">
                        {% include 'partials/seoul_map.svg' %}
                    </div>
                </div>

            </div>
        </div>

        <!-- 오른쪽: 데이터/그래프 패널 -->
        <div class="col-12 col-md-7">
            <div class="predict-right">

                <h5 class="mb-2">머신러닝</h5>
                <p class="small text-muted mb-3">
                    왼쪽에서 <strong>연도·자치구</strong>를 선택하거나<strong>지도를 클릭</strong>하면,<br>
                    해당 조건에 대한<strong>실제·예측 이용자 수</strong>와 그래프를 보여줍니다.
                </p>

                <!-- 추세 그래프 -->
                <div class="predict-placeholder mb-3" id="predict-chart-area">
                    <canvas id="predictChart"></canvas>
                </div>

                <p class="predict-model-info">
                    <span class="d-block fw-semibold">
                        모델 성능 (2015–2022년 검증 데이터 기준)
                    </span>
                    <span class="d-block">
                        이 모델은 실제 지역아동센터 이용자 수 변동성의 약 84.4%를 설명합니다.
                    </span>
                </p>

                <!-- 요약 카드 3개 -->
                <div class="mb-3" id="predict-summary-area">
                    <!-- JS에서 카드 HTML로 채움 -->
                </div>

                <!-- 예측 데이터 + 피처 요약 표 -->
                <div class="predict-placeholder small" id="predict-data-area">
                    예측 데이터 표 자리<br>
                    (연도 · 자치구 · 주요 지표)
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='js/predict.js') }}"></script>
{% endblock %}
